<!DOCTYPE html>
<html>
<style>
table,th,td {
  border : 1px solid black;
  border-collapse: collapse;
}
th,td {
  padding: 5px;
}
</style>
<body>



<p>Click on a CD to display album information.</p>
<p id='showCD'></p>
<p id='demox'></p>
<p id='division'></p>
<p id='district'></p>
<p id='upazila'></p>
<p id='result'></p>

<table id="demo"></table>


<script>
var x,xmlhttp,xmlDoc;
xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", "cd_catalog.xml", false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;

x = xmlDoc.getElementsByTagName("CD");

var y;
xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", "division.xml", false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;
divdoc=xmlDoc
y = divdoc.getElementsByTagName("divisions");

var nodes=x;

// for (i=0;i<nodes.length;i++){
//      var cdname=nodes[0];

     // document.getElementById("demox").innerHTML=cdname;
    // if (cdname.isEqualNode("Hide your heart"))
    // {
    //     document.getElementById("demo").innerHTML =nodes[i];
    //     x=nodes[i];
    // }

// }




// table="<tr><th>Artist</th><th>Title</th></tr>";
// for (i = 0; i <x.length; i++) {
//   table += "<tr onclick='displayCD(" + i + ")'><td>";
//   var yy= x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue;
//   // var zz=yy.isEqualNode("Joe Cocker");
//   // document.getElementById("demox").innerHTML =zz;
//   table +=yy;
//   table += "</td><td>";
//   table +=  x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue;
//   table += "</td></tr>";
//   // <option value="volvo">Volvo</option>
// }



selectdiv="<select onchange='distselect()' id='selectdivision'>";
for (i=0;i<y.length;i++){
     var yy= y[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
     selectdiv+="<option value="+yy+">"+yy+"</option>"
}

selectdiv+="</select>";

// document.getElementById("demo").innerHTML = table;
document.getElementById("division").innerHTML = selectdiv;




function distselect() {

    var  seldis = document.getElementById("selectdivision").value;

    var selid=0;
    y = divdoc.getElementsByTagName("divisions");
    for (i=0;i<y.length;i++){
        var yy= y[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
        if(yy==seldis){
            selid=y[i].getElementsByTagName("id")[0].childNodes[0].nodeValue
        }

    }
    document.getElementById("result").innerHTML =selid;


    //here loading the distrinc list
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "district.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;
    distdoc=xmlDoc;
    var distInfo=distdoc.getElementsByTagName("districts");

    var distName;
    selectdist="<select onchange='upazilaselect()' id='selectdistrict'>";
    for (i=0;i<distInfo.length;i++){
        var yy= distInfo[i].getElementsByTagName("division_id")[0].childNodes[0].nodeValue;
        if(yy==selid){
            distName=distInfo[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
            selectdist+="<option value="+distName+">"+distName+"</option>"
        }

    }
    selectdist+="</select>";
    document.getElementById("district").innerHTML = selectdist;


}

function upazilaselect() {

    var  seldis = document.getElementById("selectdistrict").value;

    var selid=0;
    y = distdoc.getElementsByTagName("districts");
    for (i=0;i<y.length;i++){
        var yy= y[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
        if(yy==seldis){
            selid=y[i].getElementsByTagName("id")[0].childNodes[0].nodeValue
        }

    }





     //here loading the upazilla list
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "Upazila.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;
    upatdoc=xmlDoc;
    var upaInfo=upatdoc.getElementsByTagName("upazilas");

    var upaName;
    selectupazila="<select id='selectupazila'>";
    for (i=0;i<upaInfo.length;i++){
        var yy= upaInfo[i].getElementsByTagName("district_id")[0].childNodes[0].nodeValue;
        if(yy==selid){
            upaName=upaInfo[i].getElementsByTagName("name")[0].childNodes[0].nodeValue;
            selectupazila+="<option value="+upaName+">"+upaName+"</option>"
        }

    }
    selectupazila+="</select>";
    document.getElementById("upazila").innerHTML = selectupazila;


    document.getElementById("result").innerHTML =selid;


    
}


function displayCD(i) {
  document.getElementById("showCD").innerHTML =
  "Artist: " +
  x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
  "<br>Title: " +
  x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
  "<br>Year: " +
  x[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue;
}
</script>





</body>
</html>
